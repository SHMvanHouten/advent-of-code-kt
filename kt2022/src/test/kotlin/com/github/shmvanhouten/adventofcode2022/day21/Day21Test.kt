package com.github.shmvanhouten.adventofcode2022.day21

import com.github.shmvanhouten.adventofcode.utility.FileReader.readFile
import org.assertj.core.api.Assertions.assertThat
import org.junit.jupiter.api.Nested
import org.junit.jupiter.api.Test

class Day21Test {

    @Nested
    inner class Part1 {

        @Test
        internal fun example() {
            assertThat(shout(example)).isEqualTo(152)
        }

        @Test
        internal fun `part 1`() {
            assertThat(shout(input)).isEqualTo(31017034894002)
        }
    }

    @Nested
    inner class Part2 {

        @Test
        internal fun `print monkeys`() {
            println(printMonkeys(example))
        }

        @Test
        internal fun `part 2`() {
            println(printMonkeys(input))
            // (989 + (2 * (125350493271600 - ((808 + (2 * ((22 * (((674 + (((2 * (302 + ((342 + ((((388 + (2 * ((13 * (673 + (((9 * (((((431 + (2 * ((((2 * ((15 * ((((((((5 * (294 + ((((897 + (((26 * (57 + ((97 + (((756 + (35 * (humn - 576))) / 7) - 702)) / 8))) - 979) * 2)) / 5) - 565) / 2))) + 597) * 2) - 665) / 3) - 63) / 10) + 347)) - 812)) + 44) / 2) - 203))) / 5) + 335) / 2) - 571)) - 412) / 11))) - 820))) / 6) - 936) * 2)) / 3))) - 497) / 3)) / 5) - 437)) - 99))) / 2)))) / 11 = 8226036122233
            // 989 + (2 * (125350493271600 - ((808 + (2 * ((22 * (((674 + (((2 * (302 + ((342 + ((((388 + (2 * ((13 * (673 + (((9 * (((((431 + (2 * ((((2 * ((15 * ((((((((5 * (294 + ((((897 + (((26 * (57 + ((97 + (((756 + (35 * (humn - 576))) / 7) - 702)) / 8))) - 979) * 2)) / 5) - 565) / 2))) + 597) * 2) - 665) / 3) - 63) / 10) + 347)) - 812)) + 44) / 2) - 203))) / 5) + 335) / 2) - 571)) - 412) / 11))) - 820))) / 6) - 936) * 2)) / 3))) - 497) / 3)) / 5) - 437)) - 99))) / 2))) = 8226036122233 * 11
            // (808 + (2 * ((22 * (((674 + (((2 * (302 + ((342 + ((((388 + (2 * ((13 * (673 + (((9 * (((((431 + (2 * ((((2 * ((15 * ((((((((5 * (294 + ((((897 + (((26 * (57 + ((97 + (((756 + (35 * (humn - 576))) / 7) - 702)) / 8))) - 979) * 2)) / 5) - 565) / 2))) + 597) * 2) - 665) / 3) - 63) / 10) + 347)) - 812)) + 44) / 2) - 203))) / 5) + 335) / 2) - 571)) - 412) / 11))) - 820))) / 6) - 936) * 2)) / 3))) - 497) / 3)) / 5) - 437)) - 99))) = (((((8226036122233 * 11) - 989) / 2) + 125350493271600) * -1) * 2
            // (2 * ((22 * (((674 + (((2 * (302 + ((342 + ((((388 + (2 * ((13 * (673 + (((9 * (((((431 + (2 * ((((2 * ((15 * ((((((((5 * (294 + ((((897 + (((26 * (57 + ((97 + (((756 + (35 * (humn - 576))) / 7) - 702)) / 8))) - 979) * 2)) / 5) - 565) / 2))) + 597) * 2) - 665) / 3) - 63) / 10) + 347)) - 812)) + 44) / 2) - 203))) / 5) + 335) / 2) - 571)) - 412) / 11))) - 820))) / 6) - 936) * 2)) / 3))) - 497) / 3)) / 5) - 437)) - 99)) = ((((((8226036122233 * 11) - 989) / 2) + 125350493271600) * -1) * 2) - 808
            // ((22 * (((674 + (((2 * (302 + ((342 + ((((388 + (2 * ((13 * (673 + (((9 * (((((431 + (2 * ((((2 * ((15 * ((((((((5 * (294 + ((((897 + (((26 * (57 + ((97 + (((756 + (35 * (humn - 576))) / 7) - 702)) / 8))) - 979) * 2)) / 5) - 565) / 2))) + 597) * 2) - 665) / 3) - 63) / 10) + 347)) - 812)) + 44) / 2) - 203))) / 5) + 335) / 2) - 571)) - 412) / 11))) - 820))) / 6) - 936) * 2)) / 3))) - 497) / 3)) / 5) - 437)) - 99) = (((((((8226036122233 * 11) - 989) / 2) + 125350493271600) * -1) * 2) - 808) / 2
            //  (((674 + (((2 * (302 + ((342 + ((((388 + (2 * ((13 * (673 + (((9 * (((((431 + (2 * ((((2 * ((15 * ((((((((5 * (294 + ((((897 + (((26 * (57 + ((97 + (((756 + (35 * (humn - 576))) / 7) - 702)) / 8))) - 979) * 2)) / 5) - 565) / 2))) + 597) * 2) - 665) / 3) - 63) / 10) + 347)) - 812)) + 44) / 2) - 203))) / 5) + 335) / 2) - 571)) - 412) / 11))) - 820))) / 6) - 936) * 2)) / 3))) - 497) / 3)) / 5) - 437)  = ((((((((((8226036122233 * 11) - 989) / 2) + 125350493271600) * -1) * 2) - 808) / 2) + 99) / 22)
            //  ((674 + (((2 * (302 + ((342 + ((((388 + (2 * ((13 * (673 + (((9 * (((((431 + (2 * ((((2 * ((15 * ((((((((5 * (294 + ((((897 + (((26 * (57 + ((97 + (((756 + (35 * (humn - 576))) / 7) - 702)) / 8))) - 979) * 2)) / 5) - 565) / 2))) + 597) * 2) - 665) / 3) - 63) / 10) + 347)) - 812)) + 44) / 2) - 203))) / 5) + 335) / 2) - 571)) - 412) / 11))) - 820))) / 6) - 936) * 2)) / 3))) - 497) / 3)) / 5)  = (((((((((((8226036122233 * 11) - 989) / 2) + 125350493271600) * -1) * 2) - 808) / 2) + 99) / 22) + 437)
            //  (674 + (((2 * (302 + ((342 + ((((388 + (2 * ((13 * (673 + (((9 * (((((431 + (2 * ((((2 * ((15 * ((((((((5 * (294 + ((((897 + (((26 * (57 + ((97 + (((756 + (35 * (humn - 576))) / 7) - 702)) / 8))) - 979) * 2)) / 5) - 565) / 2))) + 597) * 2) - 665) / 3) - 63) / 10) + 347)) - 812)) + 44) / 2) - 203))) / 5) + 335) / 2) - 571)) - 412) / 11))) - 820))) / 6) - 936) * 2)) / 3))) - 497) / 3))  = ((((((((((((8226036122233 * 11) - 989) / 2) + 125350493271600) * -1) * 2) - 808) / 2) + 99) / 22) + 437) * 5)
            //  (((2 * (302 + ((342 + ((((388 + (2 * ((13 * (673 + (((9 * (((((431 + (2 * ((((2 * ((15 * ((((((((5 * (294 + ((((897 + (((26 * (57 + ((97 + (((756 + (35 * (humn - 576))) / 7) - 702)) / 8))) - 979) * 2)) / 5) - 565) / 2))) + 597) * 2) - 665) / 3) - 63) / 10) + 347)) - 812)) + 44) / 2) - 203))) / 5) + 335) / 2) - 571)) - 412) / 11))) - 820))) / 6) - 936) * 2)) / 3))) - 497) / 3)  = ((((((((((((8226036122233 * 11) - 989) / 2) + 125350493271600) * -1) * 2) - 808) / 2) + 99) / 22) + 437) * 5) - 674
            //  ((2 * (302 + ((342 + ((((388 + (2 * ((13 * (673 + (((9 * (((((431 + (2 * ((((2 * ((15 * ((((((((5 * (294 + ((((897 + (((26 * (57 + ((97 + (((756 + (35 * (humn - 576))) / 7) - 702)) / 8))) - 979) * 2)) / 5) - 565) / 2))) + 597) * 2) - 665) / 3) - 63) / 10) + 347)) - 812)) + 44) / 2) - 203))) / 5) + 335) / 2) - 571)) - 412) / 11))) - 820))) / 6) - 936) * 2)) / 3))) - 497)  = (((((((((((((8226036122233 * 11) - 989) / 2) + 125350493271600) * -1) * 2) - 808) / 2) + 99) / 22) + 437) * 5) - 674) * 3
            //  (2 * (302 + ((342 + ((((388 + (2 * ((13 * (673 + (((9 * (((((431 + (2 * ((((2 * ((15 * ((((((((5 * (294 + ((((897 + (((26 * (57 + ((97 + (((756 + (35 * (humn - 576))) / 7) - 702)) / 8))) - 979) * 2)) / 5) - 565) / 2))) + 597) * 2) - 665) / 3) - 63) / 10) + 347)) - 812)) + 44) / 2) - 203))) / 5) + 335) / 2) - 571)) - 412) / 11))) - 820))) / 6) - 936) * 2)) / 3)))  = ((((((((((((((8226036122233 * 11) - 989) / 2) + 125350493271600) * -1) * 2) - 808) / 2) + 99) / 22) + 437) * 5) - 674) * 3) + 497
            //  (302 + ((342 + ((((388 + (2 * ((13 * (673 + (((9 * (((((431 + (2 * ((((2 * ((15 * ((((((((5 * (294 + ((((897 + (((26 * (57 + ((97 + (((756 + (35 * (humn - 576))) / 7) - 702)) / 8))) - 979) * 2)) / 5) - 565) / 2))) + 597) * 2) - 665) / 3) - 63) / 10) + 347)) - 812)) + 44) / 2) - 203))) / 5) + 335) / 2) - 571)) - 412) / 11))) - 820))) / 6) - 936) * 2)) / 3))  = ((((((((((((((((8226036122233 * 11) - 989) / 2) + 125350493271600) * -1) * 2) - 808) / 2) + 99) / 22) + 437) * 5) - 674) * 3) + 497) / 2)
            //  ((342 + ((((388 + (2 * ((13 * (673 + (((9 * (((((431 + (2 * ((((2 * ((15 * ((((((((5 * (294 + ((((897 + (((26 * (57 + ((97 + (((756 + (35 * (humn - 576))) / 7) - 702)) / 8))) - 979) * 2)) / 5) - 565) / 2))) + 597) * 2) - 665) / 3) - 63) / 10) + 347)) - 812)) + 44) / 2) - 203))) / 5) + 335) / 2) - 571)) - 412) / 11))) - 820))) / 6) - 936) * 2)) / 3)  = ((((((((((((((((8226036122233 * 11) - 989) / 2) + 125350493271600) * -1) * 2) - 808) / 2) + 99) / 22) + 437) * 5) - 674) * 3) + 497) / 2)- 302
        }
    }

    private val input by lazy { readFile("/input-day21.txt")}
    private val example = """
        root: pppw + sjmn
        dbpl: 5
        cczh: sllz + lgvd
        zczc: 2
        ptdq: humn - dvpt
        dvpt: 3
        lfqf: 4
        humn: 5
        ljgn: 2
        sjmn: drzm * dbpl
        sllz: 4
        pppw: cczh / lfqf
        lgvd: ljgn * ptdq
        drzm: hmdt - zczc
        hmdt: 32
    """.trimIndent()

}
